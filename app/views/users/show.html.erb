<div class="container py-5">
  <% if notice %>
    <div class="alert alert-success glass-morphism mb-4">
      <%= notice %>
    </div>
  <% end %>

  <div class="glass-morphism p-4 mb-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div class="d-flex align-items-center">
        <i class="bi bi-person-circle display-4 me-3 text-gradient"></i>
        <h1 class="text-gradient h2 mb-0"><%= @user.name %></h1>
      </div>

      <div class="d-flex gap-2">
        <% if current_user && (current_user == @user || current_user.admin) %>
          <%= link_to new_program_path, class: "btn btn-primary rounded-pill px-4 hover-lift" do %>
            <i class="bi bi-plus-lg me-2"></i>
            新規番組作成
          <% end %>
        <% end %>
      </div>
    </div>

    <div class="mb-5">
      <h3 class="text-gradient h4 mb-4">
        <i class="bi bi-broadcast me-2"></i>
        制作に参加している番組
      </h3>

      <div class="row g-4">
        <%= render @programs %>
      </div>
    </div>

    <div class="d-flex gap-3 mt-4">
      <%= link_to users_path, class: "btn btn-outline-light rounded-pill px-4 hover-lift" do %>
        <i class="bi bi-arrow-left me-2"></i>
        ユーザー一覧に戻る
      <% end %>

      <% if current_user && (@user == current_user || current_user.admin) %>
        <%= link_to edit_user_path(@user), class: "btn btn-outline-light rounded-pill px-4 hover-lift" do %>
          <i class="bi bi-pencil me-2"></i>
          編集する
        <% end %>

        <%= button_to @user, 
            method: :delete, 
            class: "btn btn-outline-danger rounded-pill px-4 hover-lift",
            form: { data: { turbo_confirm: "本当に削除しますか？" } } do %>
          <i class="bi bi-trash me-2"></i>
          削除する
        <% end %>
      <% end %>
    </div>

    <% if current_user&.admin %>
      <div class="mt-4 pt-4 border-top">
        <small class="text-white-50">
          <i class="bi bi-shield-lock me-2"></i>
          Admin View: current_user: <%= current_user.name %>
        </small>
      </div>
    <% end %>
  </div>
</div>